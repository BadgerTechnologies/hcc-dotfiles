# zsh Configuration specific for Centos5 (old LPDEV) machines:
# vim: set et sw=4:

# Old LPDEV boxen are too stupid to understand decent terms. Disable 256-color.
TERM=${TERM%-256color}

export MLS_EXPERT=1

# Keep "source .zshrc" safe. mlsinit will re-order my path if done twice ;(
if [ -z "$MLS_OSTYPE" ] ; then
    eval `/m/mls/tools/bin/mlsinit -s`
fi

BTOOLS=/m/btools/futures/next/builds/wip/$MLS_OSTYPE
PPC_XCOMP=$BTOOLS/powerpc-750-linux-gnu_gcc-3.4.6/bin/powerpc-750-linux-gnu-
ARMEB_XCOMP=$BTOOLS/arm-marvell-linux-gnueabi-be/bin/arm-marvell-linux-gnueabi-
ARMEL_XCOMP=$BTOOLS/arm-marvell-linux-gnueabi-le/bin/arm-marvell-linux-gnueabi-
alias ppc-gdb=${PPC_XCOMP}gdb
alias arm-gdb=${ARMEL_XCOMP}gdb
alias armeb-gdb=${ARMEB_XCOMP}gdb
function svnurl() { svn info "$@" | awk '/^URL:/ { print $2 }' }

# Note: Don't call the following $VIM or $GVIM. It actually breaks
# vim on lpdev for unclear reasons.
export VIM_EXE=/os/all/apps/vim-7.1/bin/vim
export GVIM_EXE=/os/all/apps/vim-7.1/bin/gvim
alias newvim='$GVIM_EXE --servername hcochran'
alias gvim='$GVIM_EXE --servername hcochran --remote'  # Late binding $GVIM_EXE
alias vi='gvim'
alias vim='$VIM_EXE'
alias viwait='$GVIM_EXE --servername hcochran --remote-wait'
export VISUAL=vim
alias gm=git-mls

# Note the typeset -U keeps the cumulative PATH & MANPATH assignments
# here safe for "source .zshrc" case.
export PATH=$HOME/bin:$HOME/local/bin:$HOME/local/git-latest/bin:$HOME/local/lxk-git-tools-latest/bin:/users/leewells/pub/bin:$PATH:/m/dev-tools/f/n/wip/bin:/i/tools/hub/cre/bin

MANPATH=$MANPATH:$HOME/local/git-latest/share/man:$HOME/local/lxk-git-tools-latest/share/man

export HWSIM_DATA_DIR=~/hwsim_data_dir
alias mstatreal 'mstatus | grep -v "^[?]"'
alias mstatusreal mstatreal

# This is necessary becuase the default (un_US.UTF-8) messes up DDD
export LANG=C

alias s='send9100 -t0'

cm()  { cmyk_viewer PSPAGE${1}.pam.gz & }
alias cm1='cm 01'
alias cm2='cm 02'
alias cm3='cm 03'
alias cm4='cm 04'
alias cm5='cm 05'
alias cm6='cm 06'
alias cm7='cm 07'
alias cm8='cm 08'
alias cm9='cm 09'

alias t='cd ~/t'
a rs='runpage4 -S Page4'

alias sdis='export DISPLAY=$(cat ~/.DISPLAY)'

alias gmf='git-mls fetch -a'


# Shortened output of the mls 'builds' command.  This works by filtering
# out headers and other undesireable rows, then cutting out only the
# actual build name from the result. For use in bldtarget completion.
function short-build-list () {
    builds | egrep -v '^[>)]|^ *[-A-Z]|^[*]|^$' | cut --delimiter=' ' -f 2
}

function complete-mls-target2 () {
    compadd -- $(short-build-list)
}
compdef complete-mls-target2 bldtarget

