#!/bin/bash

# Setup hcochran's prompt.
# We expect that ~/.zsh/gencolors has already been sourced by this shell, so
# that all the color strings therein are already defined.

setopt PROMPT_SUBST


function hccprompt {
    # This is magic for drawing extended character art. I got this stuff
    # from: http://www.aperiodic.net/phil/prompt/
    typeset -A altchar
    set -A altchar ${(s..)terminfo[acsc]}
    PR_SET_CHARSET="%{$terminfo[enacs]%}"
    PR_SHIFT_IN="%{$terminfo[smacs]%}"
    PR_SHIFT_OUT="%{$terminfo[rmacs]%}"
    PR_HBAR=${altchar[q]:--}
    PR_ULCORNER=${altchar[l]:--}
    PR_LLCORNER=${altchar[m]:--}
    PR_LRCORNER=${altchar[j]:--}
    PR_URCORNER=${altchar[k]:--}

    # I want to see what host I am on, but only if it is anything other than
    # my "main" LPDEV host.
    local conditional_host=
    local host=`hostname`
    [ "$host" != "fleetwood" ] && conditional_host=" $host"


    PS1="%{$hyellow%}$PR_SHIFT_IN$PR_ULCORNER$PR_HBAR$PR_HBAR$PR_HBAR$PR_SHIFT_OUT%{$hyellow%}\
[%T${conditional_host}]%0(?,, %{$bgred%}%{$hwhite%} Exit %? %{$norm%}%{$hyellow%})"\
'$(_git_ps1)'" %~/
%{$hyellow%}$PR_SHIFT_IN$PR_LLCORNER$PR_HBAR$PR_HBAR$PR_SHIFT_OUT>%{$norm%} "

}
hccprompt

alias sp='source ~/.zsh/setprompt'
